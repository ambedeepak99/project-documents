<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"app.js.html":{"id":"app.js.html","title":"Source: app.js","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Source: app.js /** * @namespace app * @description index file of application. global variable should be define in this file. * @author deepak.ambekar [5/25/2017]. */ var express = require('express'); var path = require('path'); var favicon = require('serve-favicon'); var logger = require('morgan'); var cookieParser = require('cookie-parser'); var bodyParser = require('body-parser'); var app = express(); var cors = require('cors'); // view engine setup app.set('views', path.join(__dirname, 'views')); app.set('view engine', 'jade'); // uncomment after placing your favicon in /public app.use(favicon(path.join(__dirname, 'public', 'favicon.png'))); app.use(logger('dev')); app.use(bodyParser.json()); app.use(bodyParser.urlencoded({extended: false})); app.use(cookieParser()); app.use(require('less-middleware')(path.join(__dirname, 'public'))); app.use(express.static(path.join(__dirname, 'public'))); app.use(cors()); //region global variable global._mongoObjectId = require('mongodb').ObjectID; global._globalDir = __dirname; global._fs = require('fs'); global._ = require('underscore'); global._async = require('async'); global._constants = require('./lib/constants'); global._config = require('./config/appConfig'); global._logger = require('./lib/logger/winstonLogger'); global._mailer = require('./lib/contact/mailer'); global._mysqlConnections = require('./lib/db_connect/mysqlConnect'); require('./lib/db_connect/mongoConnect').createConnection(function (connections) { global._mongoConnections = connections; }); global._redisConnections = require('./lib/db_connect/redisConnect'); global._utils = require(&quot;./lib/utils&quot;); //endregion var auth = require('./lib/authenticate/auth'); //app.use('/v1/', require('./routes')(app)); app.all(_config.authConfig.basicAlias + '/*', [auth.authenticate]); var router = require('./routes')(app); // catch 404 and forward to error handler app.use(function (req, res, next) { var err = new Error('Not Found'); err.status = 404; next(err); }); // error handler app.use(function (err, req, res, next) { // set locals, only providing error in development res.locals.message = err.message; res.locals.error = req.app.get('env') === 'development' ? err : {}; // render the error page res.status(err.status || 500); res.render('error'); }); process.on('uncaughtException', function (err) { _logger.error(&quot; ##### SERVER CRASH ##### \\n&quot; , err, &quot;\\n ########## END ##########&quot;); } ); module.exports = app; × Search results Close "},"lib_authenticate_auth.js.html":{"id":"lib_authenticate_auth.js.html","title":"Source: lib/authenticate/auth.js","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Source: lib/authenticate/auth.js /** * @namespace authenticate * @description authentication logic goes here * @author deepak.ambekar [5/25/2017]. */ var jwt = require('jwt-simple'); var dateUtil = require('date-format-utils'); var auth = {}; /** * authenticate token send in request header * @memberof authenticate * @param request {object} service request * @param response {object} service response * @param next */ function authenticate(request, response, next) { if (request.method == 'OPTIONS') { _logger.debug(&quot;Auth options&quot;); response.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE'); response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Origin, X-Requested-With, Content-Type, Accept, Authorization&quot;); response.setHeader(&quot;access-control-expose-headers&quot;, &quot;Origin, X-Requested-With, Content-Type, Accept, Authorization&quot;); next(); } else { _logger.debug(&quot;Auth Started&quot;); //Write your authentication logic here try { var token = request.headers['authorization'] || null; if (token) { var decoded = jwt.decode(token, _config.authConfig.secretKey); _logger.debug(&quot;decoded msg::&quot;, JSON.stringify(decoded)); if (decoded.expire_at &lt;= Date.now()) { _logger.debug(&quot;Token Force Expire done, expire_at:&quot;,dateUtil.formatDate(decoded.expire_at,'hh:mm:ss tt')); _utils.send(response, { type: _constants.RESPONSE_MESSAGES.TOKEN_EXPIRED }); } else { var inactiveTime = 0; if (decoded.last_modified &lt; Date.now()) { inactiveTime = Math.abs((Date.now() - decoded.last_modified) / 60000); } if (inactiveTime &gt;= _config.authConfig.inactiveTimeFrame) { _logger.debug(&quot;Token Expire due to inactive&quot;); _utils.send(response, { type: _constants.RESPONSE_MESSAGES.TOKEN_EXPIRED }); } else { _logger.debug(&quot;Token authorized&quot;); request.decoded = decoded; var newToken = generateToken(decoded.payload, decoded.expire_at); response.setHeader('Authorization', newToken); next(); } } } else { _utils.send(response, { type: _constants.RESPONSE_MESSAGES.NOT_AUTHORIZED }); } } catch (e) { _logger.error(&quot;Error generating auth token, &quot;,e); _utils.send(response, { type: _constants.RESPONSE_MESSAGES.NOT_AUTHORIZED }); } _logger.debug(&quot;Auth Finish&quot;); } }; auth.authenticate = authenticate; /** * generate token for request * @memberof authenticate * @param payload {object} payload encoded in token * @param expire_at {number} token expire time * @returns {*} */ function generateToken(payload, expire_at) { var last_modified = Date.now(); if (_utils.isEmpty(expire_at)) { var time = 60 * 60; if (_config.authConfig.forceExpireTimeFrame &amp;&amp; typeof _config.authConfig.forceExpireTimeFrame == &quot;number&quot;) time = _config.authConfig.forceExpireTimeFrame * 60; else _logger.debug(&quot;Default 60min force expire time frame set.&quot;); expire_at = _utils.expiresAt(time); } var token = jwt.encode({ last_modified: last_modified, expire_at: expire_at, payload: payload }, _config.authConfig.secretKey); return token; } auth.generateToken = generateToken; module.exports = auth; × Search results Close "},"lib_constants.js.html":{"id":"lib_constants.js.html","title":"Source: lib/constants.js","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Source: lib/constants.js /** * @namespace constants * @description application constants * @author deepak.ambekar [5/25/2017]. */ /** * application constants object * @memberof constants * @type {{DEV_ENV: string, MESSAGES: {INVALID_REQUEST: {status_code: number, code: number, message: string}, TOKEN_EXPIRED: {status_code: number, code: number, message: string}, NOT_AUTHORIZED: {status_code: number, code: number, message: string}, SERVER_ERROR: {status_code: number, code: number, message: string}, NO_RECORDS_FOUND: {status_code: number, code: number, message: string}, SUCCESS: {status_code: number, code: number, message: string}}}} */ var constants = { DEV_ENV: &quot;development&quot;, DATA_SF:{ url:&quot;https://data.sfgov.org/resource/6a9r-agq8.json&quot; }, CUSTOM_MESSAGES: { MISSING_PARAMETER: &quot;Missing parameter in request.&quot;, DB_ERROR: &quot;Database query error.&quot;, WRONG_PASSWORD: &quot;Wrong password entered.&quot;, WRONG_USERNAME: &quot;Wrong username entered.&quot;, SIGNUP_FAILED:&quot;Signup failed&quot;, USER_EXITS:&quot;Username already exits.&quot; }, RESPONSE_MESSAGES: { INVALID_REQUEST: { status_code: 400, code: 400, message: 'Invalid request' }, TOKEN_EXPIRED: { status_code: 401, code: 401, message: 'Access token is expired.' }, NOT_AUTHORIZED: { status_code: 401, code: 402, message: 'Unauthorized access' }, SERVER_ERROR: { status_code: 500, code: 500, message: 'Something went wrong. Please try again later.' }, SUCCESS: { status_code: 200, code: 2000, message: 'Success' }, NO_RECORDS_FOUND: { status_code: 200, code: 3000, message: 'No record found.' }, INCOMPLETE: { status_code: 200, code: 3001, message: 'Incomplete request' }, INVALID_CODE: { status_code: 200, code: 3002, message: 'Response code and msg not mention. please select valid response code.' }, FAILED: { status_code: 200, code: 3003, message: 'Failed' }, LOGIN_FAILED: { status_code: 200, code: 3004, message: 'login credential are wrong.' } } }; module.exports = constants; × Search results Close "},"lib_contact_mailer.js.html":{"id":"lib_contact_mailer.js.html","title":"Source: lib/contact/mailer.js","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Source: lib/contact/mailer.js /** * @namespace mailer * @description node mailer * @author deepak.ambekar [5/25/2017]. */ var nodemailer = require('nodemailer'); var mailer = {}; // create reusable transporter object using SMTP transport var transporter = nodemailer.createTransport({ service: 'Gmail', auth: { user: 'test@gmail.com',//add email ID pass: 'test'//add your email ID password } }); mailer.sendEmail = function (html_content, plain_text, subject_text, to_email, from_email, callback) { // NB! No need to recreate the transporter object. You can use // the same transporter object for all e-mails // setup e-mail data with unicode symbols var mailOptions = { from: from_email, // sender address to: to_email, // list of receivers subject: subject_text, // Subject line text: plain_text, // plaintext body html: html_content // html body }; // send mail with defined transport object transporter.sendMail(mailOptions, function (error, info) { if (error) { console.log(error); callback(error, null); } else { console.log('Message sent: ' + info.response); callback(null, info); } }); }; mailer.sendEmailAttachment = function (html_content, plain_text, subject_text, to_email, from_email, attachment, callback) { // NB! No need to recreate the transporter object. You can use // the same transporter object for all e-mails // setup e-mail data with unicode symbols var mailOptions = { from: from_email, // sender address to: to_email, // list of receivers subject: subject_text, // Subject line text: plain_text, // plaintext body html: html_content // html body }; if (attachment) { mailOptions['attachments'] = attachment; } // send mail with defined transport object transporter.sendMail(mailOptions, function (error, info) { if (error) { console.log(error); callback(error, null); } else { console.log('Message sent: ' + info.response); callback(null, info); } }); }; module.exports = mailer; × Search results Close "},"app_modules_dataSF_dataSfCtrl.js.html":{"id":"app_modules_dataSF_dataSfCtrl.js.html","title":"Source: app_modules/dataSF/dataSfCtrl.js","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Source: app_modules/dataSF/dataSfCtrl.js /** * @module dataSF/dataSfCtrl * @description controller function of datasf module * @author deepak.ambekar [5/25/2017]. */ var filePath = &quot;login/dataSfCtrl.js&quot;; var dataSfCtrl = {}; var requestAPI = require('request'); /** * get all data of datasf service * @memberof module:dataSF/dataSfCtrl * @param request {object} service request * @param response {object} service response */ function getAllData(request, response) { var functionName = _utils.formatFunctionName(filePath, getAllData.name); requestAPI(_constants.DATA_SF.url, function (error, res, body) { if (!error &amp;&amp; res.statusCode == 200) { _logger.info(functionName + &quot;dataSF service success response&quot;); var result = null; if (typeof body == &quot;string&quot;) { try { result = JSON.parse(body); } catch (e) { _logger.error(functionName + &quot;parsing response body failed&quot;, e); } } else result = body; _utils.send(response, {type: _constants.RESPONSE_MESSAGES.SUCCESS, data: result}); } else { _logger.error(functionName + &quot;dataSF service failed. Error&quot;, error); _utils.send(response, {type: _constants.RESPONSE_MESSAGES.FAILED, err: error}); } }); }; dataSfCtrl.getAllData = getAllData; /** * get circle data from lat,long and radius distance using datasf service * @memberof module:dataSF/dataSfCtrl * @param request {object} service request * @param response {object} service response */ function getCircleData(request, response) { var functionName = _utils.formatFunctionName(filePath, getCircleData.name); var requiredParam = ['lat', 'long', 'distance']; var data = { distance: request.params[&quot;distance&quot;] || 500 }; for (var key in request.query) { if (!_utils.isEmpty(request.query[key])) data[key] = request.query[key]; } var missingParam = _utils.checkRequiredMissingParam(data, requiredParam); if (missingParam) { _utils.send(response, { type: _constants.RESPONSE_MESSAGES.INCOMPLETE, custom_msg: missingParam }); } else { var url = _constants.DATA_SF.url + &quot;?$where=within_circle(location,&quot; + data.lat + &quot;,&quot; + data.long + &quot;,&quot; + data.distance + &quot;)&quot;; _logger.info(functionName+&quot;circle service url :&quot;,url); requestAPI(url, function (error, res, body) { if (!error &amp;&amp; res.statusCode == 200) { _logger.info(functionName + &quot;dataSF circle service success response&quot;); var result = null; if (typeof body == &quot;string&quot;) { try { result = JSON.parse(body); } catch (e) { _logger.error(functionName + &quot;parsing response body failed&quot;, e); } } else result = body; _utils.send(response, {type: _constants.RESPONSE_MESSAGES.SUCCESS, data: result}); } else { _logger.error(functionName + &quot;dataSF circle service failed. Error&quot;, error); _utils.send(response, {type: _constants.RESPONSE_MESSAGES.FAILED, err: error}); } }); } }; dataSfCtrl.getCircleData = getCircleData; module.exports = dataSfCtrl; × Search results Close "},"app_modules_login_loginCtrl.js.html":{"id":"app_modules_login_loginCtrl.js.html","title":"Source: app_modules/login/loginCtrl.js","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Source: app_modules/login/loginCtrl.js /** * @module login/loginCtrl * @description controller function of login module * @author deepak.ambekar [5/25/2017]. */ var filePath = &quot;login/loginCtrl.js&quot;; var loginCtrl = {}; var dateUtil = require('date-format-utils'); var auth = require('../../lib/authenticate/auth'); var loginDbCtrl = require('./loginDbCtrl'); /** * validate username and password, send token to authorized user * @param request {object} service request * @param response {object} service response */ function login(request, response) { var functionName = _utils.formatFunctionName(filePath, login.name); var requiredParam = ['username', 'password']; var data = request.body; var missingParam = _utils.checkRequiredMissingParam(data, requiredParam); if (missingParam) { _utils.send(response, { type: _constants.RESPONSE_MESSAGES.INCOMPLETE, err: missingParam }); } else { //compare username,password with database loginDbCtrl.dbValidateLogin(data, function (err, result) { if (err) { _utils.send(response, {type: _constants.RESPONSE_MESSAGES.FAILED, err: err}); } else if (result.length &gt; 0) { var loginData = result[0]; loginData.loginTime = dateUtil.formatDate(new Date(), 'yyyy-MM-dd HH:mm:ss tt'); var passwordHmac = _utils.getHmac(data.password, loginData.salt_value, loginData.encode_method); if (loginData.password != passwordHmac) { _utils.send(response, { type: _constants.RESPONSE_MESSAGES.LOGIN_FAILED, custom_msg: _constants.CUSTOM_MESSAGES.WRONG_PASSWORD}); } else { var token = auth.generateToken(loginData); response.setHeader('Authorization', token); _utils.send(response, { type: _constants.RESPONSE_MESSAGES.SUCCESS, data: { token: token } }); } } else { _utils.send(response, {type: _constants.RESPONSE_MESSAGES.LOGIN_FAILED}); } }); } } loginCtrl.login = login; /** * signup new user and send token once successful signup done. * @param request {object} service request * @param response {object} service response */ function signUp(request, response) { var functionName = _utils.formatFunctionName(filePath, login.name); var requiredParam = ['username', 'password', 'email']; var data = request.body; var missingParam = _utils.checkRequiredMissingParam(data, requiredParam); if (missingParam) { _utils.send(response, { type: _constants.RESPONSE_MESSAGES.INCOMPLETE, custom_msg: missingParam }); } else { loginDbCtrl.dbValidateLogin(data,function(error,loginData){ if (error) { _utils.send(response, {type: _constants.RESPONSE_MESSAGES.FAILED, err: error}); } else if (loginData.length &gt; 0) { _utils.send(response, { type: _constants.RESPONSE_MESSAGES.FAILED, custom_msg:_constants.CUSTOM_MESSAGES.USER_EXITS }); } else{ var saltValue = _utils.getHmac(data.username); var encodeMethod = &quot;sha256&quot;; var passwordHmac = _utils.getHmac(data.password, saltValue, encodeMethod); var currentTime = new Date(); var insertObj = { username: data.username, password: passwordHmac, email: data.email, salt_value: saltValue, encode_method: encodeMethod, created_at: dateUtil.formatDate(currentTime, 'yyyy-MM-dd HH:mm:ss tt'), created_timestamp: dateUtil.toTimestamp(currentTime, 'sec') }; loginDbCtrl.dbInsertLoginData(insertObj,function(err,result){ if (err) { _utils.send(response, {type: _constants.RESPONSE_MESSAGES.FAILED, err: err}); } else if (result &gt; 0) { _logger.info(functionName+&quot;signup success. record inserted &quot;+result); insertObj.loginTime = dateUtil.formatDate(new Date(), 'yyyy-MM-dd HH:mm:ss tt'); var token = auth.generateToken(insertObj); response.setHeader('Authorization', token); _utils.send(response, { type: _constants.RESPONSE_MESSAGES.SUCCESS, data: { token: token } }); } else{ _utils.send(response, { type: _constants.RESPONSE_MESSAGES.LOGIN_FAILED, custom_msg:_constants.CUSTOM_MESSAGES.SIGNUP_FAILED }); } }); } }); } } loginCtrl.signUp = signUp; module.exports = loginCtrl; × Search results Close "},"app_modules_login_loginDbCtrl.js.html":{"id":"app_modules_login_loginDbCtrl.js.html","title":"Source: app_modules/login/loginDbCtrl.js","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Source: app_modules/login/loginDbCtrl.js /** * @module login/loginDbCtrl * @description database controller function of login module [database activity] * @author deepak.ambekar [5/25/2017]. */ var filePath = &quot;login/loginDbCtrl.js&quot;; var loginDbCtrl={}; /** * send user data based on username * @param data {object} data to validate login * @param callback {function} callback function */ function dbValidateLogin(data, callback) { var functionName = _utils.formatFunctionName(filePath, dbValidateLogin.name); var collection = _mongoConnections.fudTruckDb.db.collection(_mongoConnections.fudTruckDb.collectionList.login); var query = { username:data.username } collection.find(query).toArray(function (err, result) { if (err) { _logger.error(functionName + &quot;Select error : &quot;, err); callback(_constants.DB_ERROR, null); } else { callback(null, result); } }); } loginDbCtrl.dbValidateLogin=dbValidateLogin; /** * insert login data * @param data {object} login data * @param callback {function} callback function */ function dbInsertLoginData(data, callback) { var functionName = _utils.formatFunctionName(filePath, dbInsertLoginData.name); if (!_utils.isEmpty(data)) { var collection = _mongoConnections.fudTruckDb.db.collection(_mongoConnections.fudTruckDb.collectionList.login); var insertData = []; if (_utils.isArray(data)) { insertData = data; } else { insertData.push(data); } //multiple insert collection.insert(insertData, function (err, result) { if (err) { _logger.error(functionName + &quot;Insert error : &quot;, err); callback(_constants.DB_ERROR, null); } else { _logger.info(functionName + &quot;Number of records inserted: &quot; + result.insertedCount); callback(null, result.insertedCount); } }); } else { callback(&quot;Insert data is empty.&quot;, null); } } loginDbCtrl.dbInsertLoginData = dbInsertLoginData; module.exports=loginDbCtrl; × Search results Close "},"lib_db_connect_mongoConnect.js.html":{"id":"lib_db_connect_mongoConnect.js.html","title":"Source: lib/db_connect/mongoConnect.js","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Source: lib/db_connect/mongoConnect.js /** * @namespace mongoConnect * @description configuring mongo database connection based on mongoConfig * @author deepak.ambekar [5/25/2017]. */ var mongoClient = require('mongodb').MongoClient; var mongoConfig = _config.mongoConfig; var connectionName = &quot;** MONGO-DB ** &quot;; function connectMongoFunctionScope(config) { return function (fcallback) { mongoClient.connect(config.host, function (err, db) { if (err) { _logger.error(connectionName + &quot;Database connection failed for &quot; + config.key + &quot;, HOST:&quot; + config.host); fcallback(null, null); } else { var con = { db: db, collectionList: config.collection }; fcallback(null, con); //region get collection name dynamic // db.listCollections().toArray(function (err, items) { // if (err) { // _logger.error(connectionName + &quot;Query failed for &quot; + config.key + &quot;, HOST:&quot; + config.host); // } else { // if (items.length &gt; 0) { // _logger.debug(connectionName+&quot;Collection List for &quot; + config.key + &quot;, HOST:&quot; + config.host+&quot; ::&quot;+items.toString()); // for (var i = 0; i &lt; items.length; i++) { // con.collection[items[i]] = items[i]; // } // } // } // fcallback(null, con); // }); //endregion } }); }; } function createConnection(callback) { var connectionWrapper = {}; for (var key in mongoConfig) { var config = mongoConfig[key]; if (config.init == true) { _logger.info(connectionName + &quot;Initializing connection for &quot; + key + &quot;, HOST:&quot; + config.host); config.key = key; connectionWrapper[key] = connectMongoFunctionScope(config); } else { _logger.info(connectionName + &quot;Connection initialization for &quot; + key + &quot; is false. HOST:&quot; + config.host); } } _async.auto(connectionWrapper, function (err, result) { if (result) { _logger.info(connectionName + _.size(result) + &quot; Connection initialized&quot;); callback(result); } else { _logger.info(connectionName + &quot;0 Connection initialized&quot;); callback({}); } }); }; module.exports = { createConnection: createConnection } × Search results Close "},"lib_db_connect_mysqlConnect.js.html":{"id":"lib_db_connect_mysqlConnect.js.html","title":"Source: lib/db_connect/mysqlConnect.js","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Source: lib/db_connect/mysqlConnect.js /** * @namespace mysqlConnect * @description configuring mysql database connection based on mysqlConfig * @author deepak.ambekar [5/25/2017]. */ var mysql = require('mysql'); var mysqlConfig = _config.mysqlConfig; var connectionName = &quot;** MYSQL ** &quot;; //region connection initialization function initializeConnection(config) { function addDisconnectHandler(connection) { connection.on(&quot;error&quot;, function (error) { if (error instanceof Error) { if (error.code === &quot;PROTOCOL_CONNECTION_LOST&quot;) { _logger.error(&quot;Connection lost for HOST:&quot; + config.host + &quot; and DATABASE:&quot; + database); _logger.error(error.stack); return initializeConnection(config); } else if (error.fatal) { _logger.error(error); } else { _logger.error(error.stack); } } }); } var connection = mysql.createConnection(config); // Add handlers. addDisconnectHandler(connection); connection.connect(); //_logger.info(connectionName+&quot;Connection established for &quot; + config.key + &quot;, HOST:&quot; + config.host + &quot;, DATABASE:&quot; + config.database); _logger.info(connectionName+&quot;Initializing connection for &quot; + config.key + &quot;, HOST:&quot; + config.host + &quot;, DATABASE:&quot; + config.database); return connection; } function initializePoolConnection(config) { var pool = mysql.createPool(config); pool.on('acquire', function (connection) { _logger.debug(connectionName + &quot;Pool Connection %d acquired for &quot; + config.key + &quot;, HOST:&quot; + config.host + &quot; and DATABASE:&quot; + database, connection.threadId); }); pool.on('enqueue', function () { _logger.error(connectionName + &quot;Waiting for available pool connection slot for &quot; + config.key + &quot;, HOST:&quot; + config.host + &quot; and DATABASE:&quot; + database); }); pool.on('release', function (connection) { _logger.debug(connectionName + &quot;Pool connection %d released for &quot; + config.key + &quot;, HOST:&quot; + config.host + &quot; and DATABASE:&quot; + database, connection.threadId); }); _logger.info(connectionName + &quot;Initializing pool connection for &quot; + config.key + &quot;, HOST:&quot; + config.host + &quot;, DATABASE:&quot; + config.database); return pool; } function endConnectionGracefully(connection) { connection.end(function (err) { _logger.debug(&quot;The connection is terminated now&quot;); }); } function endPoolGracefully(pool) { pool.end(function (err) { _logger.debug(&quot;all connections in the pool have ended&quot;); }); } //endregion //region create connection object for mysql config function createConnection() { var connectionWrapper = {}; for (var key in mysqlConfig) { var config = mysqlConfig[key]; if (config.init == true) { if (config.port == &quot;&quot;) delete config.port; config.key = key; connectionWrapper[key] = { connection: initializeConnection(config), pool: initializePoolConnection(config) }; keepAlive(connectionWrapper[key].connection, config); } else { _logger.info(connectionName + &quot;Connection initialization for &quot; + key + &quot; is false. HOST:&quot; + config.host + &quot;, DATABASE:&quot; + config.database); } } return connectionWrapper; } function keepAlive(connection, config) { if (connection) { connection.query('select 1', [], function (err, result) { _logger.info(connectionName + &quot;keep live connection ID:: &quot; + connection.threadId + &quot; for &quot; + config.key + &quot;, HOST:&quot; + config.host + &quot;, DATABASE:&quot; + config.database); if (err) { _logger.error(connectionName + &quot;Keep a live query failed. HOST:&quot; + config.host + &quot;, DATABASE:&quot; + config.database); _logger.error(err); } setTimeout(function () { keepAlive(connection, config); }, 1000 * 60 * 5); }); } } module.exports = createConnection(); //endregion × Search results Close "},"lib_db_connect_redisConnect.js.html":{"id":"lib_db_connect_redisConnect.js.html","title":"Source: lib/db_connect/redisConnect.js","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Source: lib/db_connect/redisConnect.js /** * @namespace redisConnect * @description configuring redis database connection based on redisConfig * @author deepak.ambekar [5/25/2017]. */ var redis = require('redis'); var redisConfig = _config.redisConfig; var connectionName = &quot;** REDIS ** &quot;; function initializedRedisClient(config) { var redisURL=(config.host==&quot;localhost&quot;?&quot;&quot;:config.host); var rClient = redis.createClient(redisURL); rClient.on('connect', function () { _logger.info(connectionName+'Connection established for '+config.key+&quot;, HOST:&quot;+config.host); }); rClient.on('error', function (error) { _logger.error(connectionName+'Connection error for '+config.key+&quot;, HOST:&quot;+config.host+&quot;\\n&quot;,error); }); rClient.on('reconnecting', function () { _logger.debug(connectionName+'Reconnecting connection for '+config.key+&quot;, HOST:&quot;+config.host); }); return rClient; } function createConnection() { var connectionWrapper = {}; for (var key in redisConfig) { var config = redisConfig[key]; if(config.host==&quot;&quot;) config.host=&quot;localhost&quot;; if (config.init == true) { _logger.info(connectionName + &quot;Initializing connection for &quot; + key + &quot;, HOST:&quot; + config.host); config.key = key; connectionWrapper[key] = initializedRedisClient(config); } else { _logger.info(connectionName + &quot;Connection initialization for &quot; + key + &quot; is false. HOST:&quot; + config.host); } } return connectionWrapper; } module.exports=createConnection(); × Search results Close "},"lib_utils.js.html":{"id":"lib_utils.js.html","title":"Source: lib/utils.js","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Source: lib/utils.js /** * @namespace utils * @description utils * @author deepak.ambekar [5/25/2017]. */ var utils = {}; var crypto = require('crypto'); //hasOwnProperty of object var hasOwnProperty = Object.prototype.hasOwnProperty; // Running the following code before any other code will create Array.isArray() if it's not natively available if (!Array.isArray) { Array.isArray = function (arg) { return Object.prototype.toString.call(arg) === '[object Array]'; }; } /** * check valid response code [mention in constants&gt;&gt;MESSAGES]. * @memberof utils * @param code {number} response code * @return {{valid: boolean, statusCode: number}} */ function validateResponseCode(code) { var obj = { valid: false, statusCode: 200 }; for (var key in _constants.RESPONSE_MESSAGES) { if (_constants.RESPONSE_MESSAGES[key].code == code) { obj.valid = true; obj.statusCode = _constants.RESPONSE_MESSAGES[key].status_code; break; } } return obj; }; utils.validateResponseCode = validateResponseCode; /** * send response of service based on options provided. * @memberof utils * @param response {object} used to send response * @param options {{type:object,custom_msg:string,custom_code:number,err:object,data:object}} send options */ function send(response, options) { var resData = {}; var code = _constants.RESPONSE_MESSAGES.INVALID_CODE.code; var msg = _constants.RESPONSE_MESSAGES.INVALID_CODE.message; var data = options.data || null; var err = options.err || null; if (!isEmpty(options.type) &amp;&amp; !findMissingKeyInObject(options.type, ['code', 'message'])) { code = options.type.code; msg = options.type.message; } if (options.custom_code) code = options.custom_code; if (options.custom_msg) msg = options.custom_msg; if (code == _constants.RESPONSE_MESSAGES.INVALID_CODE.code) { msg = _constants.RESPONSE_MESSAGES.INVALID_CODE.message; data = null; err = &quot;Response code not mention so default INVALID_CODE response code selected. please mention valid response code, refer 'constants &gt;&gt; RESPONSE_MESSAGES object'&quot;; } var validCodeObj = validateResponseCode(code); if (!validCodeObj.valid) _logger.debug(&quot;add response code '&quot; + code + &quot;' in constants &gt;&gt; RESPONSE_MESSAGES object&quot;); resData.code = code; resData.msg = msg; resData.data = data; if (process.env.NODE_ENV === _constants.DEV_ENV &amp;&amp; err) { resData.error = err; } response.status(validCodeObj.statusCode || 200).json(resData); }; utils.send = send; /** * Check object contain all keys in keyList * @memberof utils * @param obj {object} object * @param keyList {array} array of object key */ function findMissingKeyInObject(obj, keyList) { var missingKeys = []; if (keyList &amp;&amp; keyList.length &gt; 0) { _.each(keyList, function (key) { if (!hasOwnProperty.call(obj, key) || obj[key] === null) missingKeys.push(key); }); } if (missingKeys.length === 0) return false; else return missingKeys.toString(); } utils.findMissingKeyInObject = findMissingKeyInObject; /** * check any required parameter is missing from request object or array object. * @memberof utils * @param request {object} request body * @param requiredParams {array} required params in request body * @return {*} */ function checkRequiredMissingParam(request, requiredParams) { var missingRequiredParamMsg = null; if (requiredParams &amp;&amp; requiredParams.length &gt; 0) { if (isArray(request)) { if (request.length &gt; 0) { for (var i = 0; i &lt; request.length; i++) { var missingKeys = findMissingKeyInObject(request[i], requiredParams); if (missingKeys) { _logger.debug(&quot;Missing parameter [&quot; + missingKeys + &quot;] in array of object =&gt;&quot; + JSON.stringify(request[i])); missingRequiredParamMsg = _constants.CUSTOM_MESSAGES.MISSING_PARAMETER + &quot; [&quot; + missingKeys + &quot;] is missing in array of object&quot;; break; } } } else { missingRequiredParamMsg = _constants.CUSTOM_MESSAGES.MISSING_PARAMETER + &quot; Empty array request found.&quot;; } } else if (!isEmpty(request)) { var missingKeys = findMissingKeyInObject(request, requiredParams); if (missingKeys) { missingRequiredParamMsg = _constants.CUSTOM_MESSAGES.MISSING_PARAMETER + &quot; [&quot; + missingKeys + &quot;]&quot;; } } else { missingRequiredParamMsg = _constants.CUSTOM_MESSAGES.MISSING_PARAMETER + &quot; Empty request found.&quot;; } } if (isEmpty(missingRequiredParamMsg)) return false; else return missingRequiredParamMsg; } utils.checkRequiredMissingParam = checkRequiredMissingParam; /** * 'true' if object is empty otherwise 'false' * @memberof utils * @param obj {object} object can be 'object,string,number,array' * @returns {boolean} */ function isEmpty(obj) { // null and undefined are &quot;empty&quot; if (obj == undefined || obj == null || obj == &quot;&quot;) return true; if (typeof obj == &quot;number&quot; || typeof obj == &quot;string&quot;) return false; // Assume if it has a length property with a non-zero value // that property is correct. if (obj.length &gt; 0) return false; if (obj.length &lt;= 0) return true; // Otherwise, does it have any properties of its own? // Note that this doesn't handle // toString and valueOf enumeration bugs in IE &lt; 9 for (var key in obj) { if (hasOwnProperty.call(obj, key)) return false; } return true; } utils.isEmpty = isEmpty; /** * 'true' if object is array otherwise 'false' * @memberof utils * @param arr {array} array object * @returns {boolean} */ function isArray(arr) { try { return Array.isArray(arr); } catch (e) { _logger.error(&quot;Error in isArray function, &quot;, e); return false; } } utils.isArray = isArray; /** * return function name with file path. * @memberof utils * @param filePath * @param functionName * @returns {string} */ function formatFunctionName(filePath, functionName) { return &quot;[&quot; + filePath + &quot;]=&gt; &quot; + functionName + &quot; =&gt; &quot;; } utils.formatFunctionName = formatFunctionName; /** * get expire timestamp based on second provided. * @memberof utils * @param seconds {number} seconds to add in current time * @returns {number} */ function expiresAt(seconds) { var date = new Date(); date.setSeconds(date.getSeconds() + seconds); return date.getTime(); } utils.expiresAt = expiresAt; /** * get hamc of text based on key and encodeType * @memberof utils * @param text {string} text * @param key {string} key used to create hmac * @param encodeType {string} algorithm to create hmac [default: sha256] * @returns {*} */ function getHmac(text, key, encodeType) { var secretkey = _config.authConfig.secretKey; var encodeMethod = 'sha256'; if (key) secretkey = key; if(encodeType) encodeMethod = encodeType; return crypto.createHmac(encodeMethod, secretkey).update(text).digest('hex'); } utils.getHmac=getHmac; /** * encrypt text * @memberof utils * @param text {string} text to encrypt * @returns {*} */ function encryptCipher(text) { var cipher = crypto.createCipher(_config.authConfig.cipherAlgorithm, _config.authConfig.secretKey); var crypted = cipher.update(text, 'utf8', 'hex'); crypted += cipher.final('hex'); return crypted; } utils.encryptCipher=encryptCipher; /** * decrypt text * @memberof utils * @param text {string} encrypted text * @returns {*} */ function decryptCipher(text) { var decipher = crypto.createDecipher(_config.authConfig.cipherAlgorithm, _config.authConfig.secretKey); var dec = decipher.update(text, 'hex', 'utf8'); dec += decipher.final('utf8'); return dec; } utils.decryptCipher=decryptCipher; module.exports = utils; × Search results Close "},"lib_logger_winstonLogger.js.html":{"id":"lib_logger_winstonLogger.js.html","title":"Source: lib/logger/winstonLogger.js","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Source: lib/logger/winstonLogger.js /** * @namespace winstonLogger * @description configuring winston logger. * @author deepak.ambekar [5/25/2017]. */ var winston = require('winston'); var DailyRotateFile = require('winston-daily-rotate-file'); var logConfig = _config.logConfig; winston.emitErrs = true; var infoFilename = logConfig.infoLogPath + '/info.log'; var errorFilename = logConfig.errorLogPath + '/error.log'; //region create log folder if doesn't exits if (!_fs.existsSync(logConfig.infoLogPath)) { try { console.log(&quot;Logging folder for 'info log' does not exist. Creating new folder... &quot;); _fs.mkdirSync(logConfig.infoLogPath); } catch(e) { console.log(&quot;Error while creating new folder for 'info log', error::&quot;); console.log(e); } } if (!_fs.existsSync(logConfig.errorLogPath)) { try { console.log(&quot;Logging folder for 'error log' does not exist. Creating new folder... &quot;); _fs.mkdirSync(logConfig.errorLogPath); } catch(e) { console.log(&quot;Error while creating new folder for 'error log', error::&quot;); console.log(e); } } //endregion var transports = [ new DailyRotateFile({ name: 'info-file', level: 'info', localTime:true, datePattern: logConfig.datePattern, filename: infoFilename, handleExceptions: true, json: true, colorize: false }), new DailyRotateFile({ level: 'error', localTime:true, datePattern: logConfig.datePattern, filename: errorFilename, handleExceptions: true, json: true, colorize: false }) ]; transports.push(new winston.transports.Console({ level: logConfig.logLevel, handleExceptions: true, json: false, colorize: true })); var logger = new winston.Logger({ transports: transports, exitOnError: false }); module.exports = logger; module.exports.stream = { write: function (message, encoding) { logger.info(message); } }; × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Modules Namespaces app authenticate constants mailer mongoConnect mysqlConnect redisConnect utils winstonLogger × Search results Close "},"namespaces.list.html":{"id":"namespaces.list.html","title":"Namespaces","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Namespaces Namespaces app authenticate constants mailer mongoConnect mysqlConnect redisConnect utils winstonLogger × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl To node in development mode use Creating an environment variable named NODE_ENV, and setting it to 'production'. export NODE_ENV=development OR run the node app with following commandNODE_ENV=development node app.js OR add to environment variable login as super user sudo -i gedit /etc/bash.bashrc write at the end of file NODE_ENV=development save file and close it × Search results Close "},"app.html":{"id":"app.html","title":"Namespace: app","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Namespace: app app index file of application. global variable should be define in this file. Author: &lt;p&gt;deepak.ambekar [5/25/2017].&lt;/p&gt; Source: app.js, line 1 × Search results Close "},"authenticate.html":{"id":"authenticate.html","title":"Namespace: authenticate","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Namespace: authenticate authenticate authentication logic goes here Author: &lt;p&gt;deepak.ambekar [5/25/2017].&lt;/p&gt; Source: lib/authenticate/auth.js, line 1 Methods &lt;static&gt; authenticate(request, response, next) authenticate token send in request header Parameters: Name Type Description request object service request response object service response next Source: lib/authenticate/auth.js, line 17 &lt;static&gt; generateToken(payload, expire_at) generate token for request Parameters: Name Type Description payload object payload encoded in token expire_at number token expire time Source: lib/authenticate/auth.js, line 83 Returns: Type * × Search results Close "},"constants.html":{"id":"constants.html","title":"Namespace: constants","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Namespace: constants constants application constants Author: &lt;p&gt;deepak.ambekar [5/25/2017].&lt;/p&gt; Source: lib/constants.js, line 1 Members &lt;static&gt; constants :Object application constants object Type: Object Source: lib/constants.js, line 12 × Search results Close "},"mailer.html":{"id":"mailer.html","title":"Namespace: mailer","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Namespace: mailer mailer node mailer Author: &lt;p&gt;deepak.ambekar [5/25/2017].&lt;/p&gt; Source: lib/contact/mailer.js, line 1 × Search results Close "},"module-dataSF_dataSfCtrl.html":{"id":"module-dataSF_dataSfCtrl.html","title":"Module: dataSF/dataSfCtrl","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Module: dataSF/dataSfCtrl controller function of datasf module Author: &lt;p&gt;deepak.ambekar [5/25/2017].&lt;/p&gt; Source: app_modules/dataSF/dataSfCtrl.js, line 1 Methods &lt;static&gt; getAllData(request, response) get all data of datasf service Parameters: Name Type Description request object service request response object service response Source: app_modules/dataSF/dataSfCtrl.js, line 16 &lt;static&gt; getCircleData(request, response) get circle data from lat,long and radius distance using datasf service Parameters: Name Type Description request object service request response object service response Source: app_modules/dataSF/dataSfCtrl.js, line 47 × Search results Close "},"module-login_loginCtrl.html":{"id":"module-login_loginCtrl.html","title":"Module: login/loginCtrl","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Module: login/loginCtrl controller function of login module Author: &lt;p&gt;deepak.ambekar [5/25/2017].&lt;/p&gt; Source: app_modules/login/loginCtrl.js, line 1 Methods &lt;inner&gt; login(request, response) validate username and password, send token to authorized user Parameters: Name Type Description request object service request response object service response Source: app_modules/login/loginCtrl.js, line 19 &lt;inner&gt; signUp(request, response) signup new user and send token once successful signup done. Parameters: Name Type Description request object service request response object service response Source: app_modules/login/loginCtrl.js, line 67 × Search results Close "},"module-login_loginDbCtrl.html":{"id":"module-login_loginDbCtrl.html","title":"Module: login/loginDbCtrl","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Module: login/loginDbCtrl database controller function of login module [database activity] Author: &lt;p&gt;deepak.ambekar [5/25/2017].&lt;/p&gt; Source: app_modules/login/loginDbCtrl.js, line 1 Methods &lt;inner&gt; dbInsertLoginData(data, callback) insert login data Parameters: Name Type Description data object login data callback function callback function Source: app_modules/login/loginDbCtrl.js, line 37 &lt;inner&gt; dbValidateLogin(data, callback) send user data based on username Parameters: Name Type Description data object data to validate login callback function callback function Source: app_modules/login/loginDbCtrl.js, line 15 × Search results Close "},"mongoConnect.html":{"id":"mongoConnect.html","title":"Namespace: mongoConnect","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Namespace: mongoConnect mongoConnect configuring mongo database connection based on mongoConfig Author: &lt;p&gt;deepak.ambekar [5/25/2017].&lt;/p&gt; Source: lib/db_connect/mongoConnect.js, line 1 × Search results Close "},"mysqlConnect.html":{"id":"mysqlConnect.html","title":"Namespace: mysqlConnect","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Namespace: mysqlConnect mysqlConnect configuring mysql database connection based on mysqlConfig Author: &lt;p&gt;deepak.ambekar [5/25/2017].&lt;/p&gt; Source: lib/db_connect/mysqlConnect.js, line 1 × Search results Close "},"redisConnect.html":{"id":"redisConnect.html","title":"Namespace: redisConnect","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Namespace: redisConnect redisConnect configuring redis database connection based on redisConfig Author: &lt;p&gt;deepak.ambekar [5/25/2017].&lt;/p&gt; Source: lib/db_connect/redisConnect.js, line 1 × Search results Close "},"utils.html":{"id":"utils.html","title":"Namespace: utils","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Namespace: utils utils utils Author: &lt;p&gt;deepak.ambekar [5/25/2017].&lt;/p&gt; Source: lib/utils.js, line 1 Methods &lt;static&gt; checkRequiredMissingParam(request, requiredParams) check any required parameter is missing from request object or array object. Parameters: Name Type Description request object request body requiredParams array required params in request body Source: lib/utils.js, line 111 Returns: Type * &lt;static&gt; decryptCipher(text) decrypt text Parameters: Name Type Description text string encrypted text Source: lib/utils.js, line 255 Returns: Type * &lt;static&gt; encryptCipher(text) encrypt text Parameters: Name Type Description text string text to encrypt Source: lib/utils.js, line 241 Returns: Type * &lt;static&gt; expiresAt(seconds) get expire timestamp based on second provided. Parameters: Name Type Description seconds number seconds to add in current time Source: lib/utils.js, line 209 Returns: Type number &lt;static&gt; findMissingKeyInObject(obj, keyList) Check object contain all keys in keyList Parameters: Name Type Description obj object object keyList array array of object key Source: lib/utils.js, line 89 &lt;static&gt; formatFunctionName(filePath, functionName) return function name with file path. Parameters: Name Type Description filePath functionName Source: lib/utils.js, line 199 Returns: Type string &lt;static&gt; getHmac(text, key, encodeType) get hamc of text based on key and encodeType Parameters: Name Type Description text string text key string key used to create hmac encodeType string algorithm to create hmac [default: sha256] Source: lib/utils.js, line 224 Returns: Type * &lt;static&gt; isArray(arr) 'true' if object is array otherwise 'false' Parameters: Name Type Description arr array array object Source: lib/utils.js, line 182 Returns: Type boolean &lt;static&gt; isEmpty(obj) 'true' if object is empty otherwise 'false' Parameters: Name Type Description obj object object can be 'object,string,number,array' Source: lib/utils.js, line 151 Returns: Type boolean &lt;static&gt; send(response, options) send response of service based on options provided. Parameters: Name Type Description response object used to send response options Object send options Source: lib/utils.js, line 50 &lt;static&gt; validateResponseCode(code) check valid response code [mention in constants&gt;&gt;MESSAGES]. Parameters: Name Type Description code number response code Source: lib/utils.js, line 28 Returns: Type Object × Search results Close "},"winstonLogger.html":{"id":"winstonLogger.html","title":"Namespace: winstonLogger","body":" DocStrap Namespaces appauthenticateconstantsmailermongoConnectmysqlConnectredisConnectutilswinstonLogger Modules dataSF/dataSfCtrllogin/loginCtrllogin/loginDbCtrl Namespace: winstonLogger winstonLogger configuring winston logger. Author: &lt;p&gt;deepak.ambekar [5/25/2017].&lt;/p&gt; Source: lib/logger/winstonLogger.js, line 1 × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
